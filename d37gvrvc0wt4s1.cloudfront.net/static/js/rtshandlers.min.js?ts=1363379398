Rollbar.ItemSparkline=Rollbar.RTSHandler.extend({init:function(c,b,a){this.$elem=c;this.options={type:"bar",barWidth:a||2,barColor:"#333",chartRangeMin:0,highlightColor:"#ffc40d"};if(b!==undefined){this.options.chartRangeMax=b}this.$elem.sparkline("html",this.options);this.$elem.data("data-itemsparkline-lastdate",this._today());this._super(window.RTS)},onRepeatItem:function(c){var d=c.item_id;var b=this.$elem.filter($("[data-itemid="+d+"]"));var a=this._today();b.each(function(){var g=$(this);var f=g.data("data-itemsparkline-lastdate");var e=g.attr("values").split(",");if(f!=a){e=e.slice(1);e.push(1)}e[e.length-1]=parseInt(e[e.length-1])+1;g.attr("values",e.join(","))});b.sparkline("html",this.options)},_today:function(){return(new Date()).getDate()}});Rollbar.ItemDetails=Rollbar.RTSHandler.extend({init:function(a){this.$elem=a;this._initTimes();this._super(window.RTS)},onRepeatItem:function(a){var e=a.item_id;var c=parseInt(a.timestamp);var d=this.$elem.filter($("[data-itemid="+e+"]"));var b=$(".item-count",d);b.each(function(){var h=$(this);var g=parseInt(h.text());h.text(g+1)});var f=this._getItemDateElem(d);f.attr("data-itemdate",c);this._updateTimes(f)},onItemStatusChange:function(b){var d=b.item_id;var a=b.status;var c=$(".item-status-listener",this.$elem.filter($("[data-itemid="+d+"]")));c.trigger("item_status_change",[d,a])},onItemLevelChange:function(b){var d=b.item_id;var a=b.level;var c=$(".item-level-container",this.$elem.filter($("[data-itemid="+d+"]")));c.trigger("item_level_change",[a])},_getItemDateElem:function(a){return $(".item-date",a||$(document.body))},_initTimes:function(){this._updateTimes(this._getItemDateElem())},_updateTimes:function(a){a.each(function(){var d=$(this);var c=parseInt(d.attr("data-itemdate"));var b=new Date(c*1000);d.data("easydate.date",null);d.attr("title",b)});a.easydate()}});Rollbar.ItemTable=Rollbar.RTSHandler.extend({init:function(a){this.$elem=a;this.projectId=a.attr("data-itemtable-projectid");this.rowUrl=a.attr("data-itemtable-rowurl");this._super(window.RTS)},onNewItem:function(c){var b=c.item_data.item;var e=b.id;var a=c.project_id;var d=parseInt(b.last_occurrence_timestamp)},onRepeatItem:function(a){var d=a.item_id;var b=parseInt(a.timestamp);var c=$("[data-itemid="+d+"]",this.$elem).first();c.remove();this._insertToHead(c);c.effect("highlight")},_insertToHead:function(a){$(".item-table-headers",this.$elem).after(a)}});